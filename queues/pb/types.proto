syntax = "proto3";
package pb;
import "github.com/vx-labs/mqtt-protocol/packet/pb.proto";


message QueueMetadata {
  string ID = 1;
  string PeerID = 2;
  uint64 LastIndex = 3;
}

message QueueCreateInput {
  string id = 1;
}

message QueueCreateOutput {}

message QueueDeleteInput {
  string id = 1;
}

message QueueDeleteOutput {}

message QueuePutMessageInput {
  string id = 1;
  packet.Publish publish = 2;
}
message QueuePutMessageOutput {}

message QueueGetMessagesInput {
  string id = 1;
  uint64 offset = 2;
}
message QueueGetMessagesOutput {
  string id = 1;
  uint64 offset = 2;
  repeated packet.Publish publishes = 3;
}
message QueueGetMessagesBatchInput {
  repeated QueueGetMessagesInput batches = 1;
}
message QueueGetMessagesBatchOutput {
  repeated QueueGetMessagesOutput batches = 1;
}

service QueuesService {
  rpc Create(QueueCreateInput) returns (QueueCreateOutput);
  rpc Delete(QueueDeleteInput) returns (QueueDeleteOutput);
  rpc PutMessage(QueuePutMessageInput) returns (QueuePutMessageOutput);
  rpc GetMessages(QueueGetMessagesInput) returns (QueueGetMessagesOutput);
  rpc GetMessagesBatch(QueueGetMessagesBatchInput) returns (QueueGetMessagesBatchOutput);
}